<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <link href="/resources/main.css" rel="stylesheet">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Пример веб-страницы</title>
</head>
<body>
<center><h1 class="ribbon"><strong class="ribbon-content">Система управления баллами по АИП для студентов УИР</strong></h1></center>
    <a href="/login" target="_blank" class="great_btn">
      <right> <button>Вход для преподавателя</button></right>
    </a>
<center><table id="all-student-table" class="features-table">
    <tr>
        <th>Имя и Фамилия студента</th>
        <th>Количество баллов</th>
        <th>Количество пропусков студента</th>
    </tr>
</table></center>
<script type="text/javascript">
    var x = new XMLHttpRequest();
    x.open("GET", "/student/all", true);
    x.onload = function (){
        var parsedStudents = JSON.parse(this.responseText);
        var studentsTable = document.getElementById('all-student-table');
        parsedStudents.forEach(function(item)  {
            var fullNameElement = document.createElement('td');
            fullNameElement.innerHTML = '<p>' + item['fullName'] + '</p>';
            var estimateElement = document.createElement('td');
            var estimateList = item.estimate;
            var exestimateList = item.extensionEstimate;
            var estimateValue = 0;
            estimateList.forEach(function(item, i, arr) {
                estimateValue+=item.estimate;
            });


            exestimateList.forEach(function(item, i, arr) {
                estimateValue+=item.estimate;
            });

            estimateElement.innerHTML = '<p>' + estimateValue + '</p>';
            var respectElement = document.createElement('td');
            var respectList = item['dateList'];
            var respectValue = 0;
            var notRespectValue = 0;
            respectList.forEach(function(item, i, arr) {
                respectValue+=item.respectCause+item.notRespectCause;
            });
            respectElement.innerHTML = '<p>' + respectValue + '</p>';
            var elementContainer = document.createElement('tr');
            elementContainer.appendChild(fullNameElement);
            elementContainer.appendChild(estimateElement);
            elementContainer.appendChild(respectElement);
            studentsTable.appendChild(elementContainer);
        });
    }
    x.send(null);
</script>
</body>
</html>